<!DOCTYPE html>

<html>

<head>

<title>Playmusic</title>



<style type="text/css">

	body {

  margin: 0;

  padding: 0;

  border: 0;

  background: #000000;

  overflow: hidden;

  }

</style>



<script src="https://www.youtube.com/iframe_api"></script>

<script>



	var urlParam = function(name, w){

    		w = w || window;

   		var rx = new RegExp('[\&|\?]'+name+'=([^\&\#]+)'),

		val = w.location.search.match(rx);

    		return !val ? '':val[1];



	}



	var videoId = urlParam('uri');
	
	var videoVolume = urlParam('Vol')
	
	var videoSeek = Number( urlParam('Seek') );

	

	function onYouTubeIframeAPIReady() {

		player = new YT.Player('player', {

			"width": window.innerWidth,

			"height": window.innerHeight,

			videoId: videoId,

        		playerVars: {
					autoplay: 1,
					showinfo: 0,
					cc_load_policy: 1,
					disablekb: 1,
					modestbranding: 1,
					rel: 0,
					controls: 0,
        		},

			events: {

				'onReady': onPlayerReady

			}

    		});

	}



	function onPlayerReady(event) {

		player.setPlaybackQuality( "default" );
		player.seekTo(videoSeek);
		player.setVolume( parseInt( videoVolume ) );
		ModifyPlayer()

	}
	
	function clearAllPlayers() {
    
        const videoPlayerElements = document.querySelectorAll('.html5-video-player');
    
        if (videoPlayerElements.length === 0) {
            console.error("No elements with class 'html5-video-player' found.");
            return false;
        }
    
        videoPlayerElements.forEach(videoPlayerElement => {
        const iframes = videoPlayerElement.querySelectorAll('iframe');
        iframes.forEach(iframe => {
            iframe.remove();
			console.info("removed.");
        });
		});
	};
	
	    function ModifyPlayer() {
			
			if (typeof isPlayerModified !== "undefined" && isPlayerModified) {
				return;
			};

            var video = document.querySelector('video');
            if (video) video.volume = 0;
            if (video) video.pause();
            if (video) video.remove();
			
			let videoID = videoId
            const url = new URL(window.location.href);
            const urlParams = new URLSearchParams(url.search);
			
            const startOfUrl = "https://www.youtube-nocookie.com/embed/";
          
            const endOfUrl = "&autoplay=1&modestbranding=1&rel=0";
            const finalUrl = startOfUrl + videoID + endOfUrl;
			
            const iframe = document.createElement('iframe');

            iframe.setAttribute('src', finalUrl);
            iframe.setAttribute('frameborder', '0');
            iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
            iframe.setAttribute('allowfullscreen', true);
            iframe.setAttribute('mozallowfullscreen', "mozallowfullscreen");
            iframe.setAttribute('msallowfullscreen', "msallowfullscreen");
            iframe.setAttribute('oallowfullscreen', "oallowfullscreen");
            iframe.setAttribute('webkitallowfullscreen', "webkitallowfullscreen");

            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.position = 'absolute';
            iframe.style.top = '0';
            iframe.style.left = '0';
            iframe.style.zIndex = '9999';
            iframe.style.pointerEvents = 'all';

            const videoPlayerElement = document.querySelector('#player');
            videoPlayerElement.appendChild(iframe);
            console.info("Finished");

            isPlayerModified = true;

    }
	
	function removeAllDuplicateVideos() {
        const videos = document.querySelectorAll('video');

        videos.forEach(video => {
            if (video.src.includes('www.youtube.com')) {
                video.muted = true;
                video.pause();
				console.info("mute ads or original player")
                video.addEventListener('volumechange', function() {
                    if (!video.muted) {
                        video.muted = true;
                        video.pause();
						console.info("mute ads or original player")
                    }
                });
                video.addEventListener('play', function() {
                    video.pause();
					console.info("pause ads or original player")
                });


            }
        });
    }



</script>

</head>



  <body>

	<div id="player"></div>

  </body>

</html>
